import{_ as l,m as h,c as o,o as a,e as s,F as f,h as g,t as c,g as v}from"./app-CprNzg69.js";const _={name:"WordsContains",data(){return{words:[],userId:this.$route.query.userId,isLoggedin:!1,favouriteWords:h({})}},mounted(){const e=this.$route.query.category;this.getWords(e),localStorage.getItem("token")&&(this.isLoggedin=!0)},methods:{getWords(e){axios.get("/api/words-contains",{params:{category:e}}).then(t=>{this.words=t.data,this.isLoggedin&&this.words.forEach(n=>{this.checkFavourite(n.id)})}).catch(t=>{console.error("APIエラー:",t)})},addFavorite(e){axios.post("/api/words-contains/add-favourite",{wordId:e,userId:this.userId}).then(t=>{t.data.success==!0?(toastr.info(t.data.message),this.checkFavourite(e)):toastr.error(t.data.message)}).catch(t=>{console.error("APIエラー:",t)})},checkFavourite(e){axios.post("/api/words-contains/is-favourite",{wordId:e,userId:this.userId}).then(t=>{this.favouriteWords[e]=t.data.success}).catch(t=>{console.error("APIエラー:",t)})},deleteFavorite(e){axios.post("/api/words-contains/delete-favourite",{wordId:e,userId:this.userId}).then(t=>{t.data.success===!0?(toastr.success(t.data.message),this.favouriteWords[e]=!1):toastr.error(t.data.message)}).catch(t=>{console.error("APIエラー:",t)})}}},k={class:"table table-hover words"},p={key:0},m={key:0},y={class:"text-danger"},I=["onClick"],x=["onClick"],F={key:1};function W(e,t,n,C,i,d){return a(),o("table",k,[s("thead",null,[t[1]||(t[1]=s("tr",null,[s("th",null,"日本語"),s("th",null,"シチリア語"),s("th",null,"お気に入り")],-1)),(a(!0),o(f,null,g(i.words,r=>(a(),o("tr",{key:r.id},[s("td",null,c(r.japanese),1),s("td",null,c(r.sicilian),1),i.isLoggedin===!0?(a(),o("td",p,[i.favouriteWords[r.id]?(a(),o("a",m,[t[0]||(t[0]=v(" お気に入り済　： ")),s("span",y,[s("a",{href:"javascript:void(0)",class:"favourite",type:"button",onClick:u=>d.deleteFavorite(r.id)},"削除",8,I)])])):(a(),o("a",{key:1,href:"javascript:void(0)",class:"favourite",type:"button",onClick:u=>d.addFavorite(r.id)},"お気に入り登録",8,x))])):(a(),o("td",F," ログインするとお気に入り登録ができます "))]))),128))])])}const L=l(_,[["render",W]]);export{L as default};
