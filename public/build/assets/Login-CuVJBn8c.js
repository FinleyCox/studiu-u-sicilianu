import{_ as m,c as l,o as i,e as o,k as f,d as g,f as n,l as d,t as u,g as p,i as c}from"./app-CprNzg69.js";const w={name:"Login",data(){return{form:{email:"",password:""},errorMsg:""}},methods:{handleLogin(){c.post("/api/login",{email:this.form.email,password:this.form.password}).then(t=>{t.data.login===!0?(localStorage.setItem("token",t.data.token),localStorage.setItem("username",t.data.username),localStorage.setItem("userId",t.data.userId),window.location.href="/"):this.errorMsg=t.data.message}).catch(t=>{t.response&&t.response.status==422?this.errorMsg="メールアドレスまたはパスワードが入力されていません":console.error("APIエラー（ログイン）:",t)})},register(){this.$router.push("/register")},forgotPassword(){this.$router.push("/forgot-password")}}},b={class:"main"},k={class:"col-12"},v={class:"login-form"},y={class:"form-group"},h={class:"form-group"},x={key:0},I={class:"row"},M={class:"btn-group mt-2"};function _(t,s,L,S,r,a){return i(),l("div",b,[o("div",k,[o("div",v,[o("form",{onSubmit:s[4]||(s[4]=f((...e)=>a.handleLogin&&a.handleLogin(...e),["prevent"]))},[o("div",y,[s[5]||(s[5]=o("label",{for:"email"},"メールアドレス",-1)),n(o("input",{type:"text",id:"email",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>r.form.email=e)},null,512),[[d,r.form.email]])]),o("div",h,[s[6]||(s[6]=o("label",{for:"password"},"パスワード",-1)),n(o("input",{type:"password",id:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>r.form.password=e)},null,512),[[d,r.form.password]])]),r.errorMsg?(i(),l("p",x,u(r.errorMsg),1)):g("",!0),o("div",I,[s[9]||(s[9]=o("button",{type:"submit",class:"btn btn-info mt-2"},"ログイン",-1)),o("button",{type:"button",class:"btn btn-secondary mt-2",onClick:s[2]||(s[2]=(...e)=>a.register&&a.register(...e))},"登録"),o("div",M,[s[7]||(s[7]=o("a",{class:"mt-2",style:{color:"black"},onclick:"location.href='/'"},"ログインせずに使用する",-1)),s[8]||(s[8]=p("　または　 ")),o("a",{class:"mt-2",style:{color:"black"},onClick:s[3]||(s[3]=(...e)=>a.forgotPassword&&a.forgotPassword(...e))},"メールアドレスをわすれた")])])],32)])])])}const P=m(w,[["render",_],["__scopeId","data-v-c0e246ac"]]);export{P as default};
